<ion-header>

  <ion-navbar>

    <ion-title>Nova Reunião</ion-title>

    <ion-buttons end>
      <button ion-button color="primary" (click)="saveNewMeeting()">Salvar</button>
    </ion-buttons>

  </ion-navbar>

</ion-header>


<ion-content padding-vertical>

  <ion-item *ngIf="!meeting.type">

    <ion-label>Tipo de Reunião</ion-label>

    <ion-select [(ngModel)]="meeting.type" [compareWith]="compareFn" okText="OK" cancelText="Cancelar">
      <ion-option *ngFor="let meetingType of meetingTypes" [value]="meetingType">{{meetingType.name}}</ion-option>
    </ion-select>

  </ion-item>

  <ion-item no-lines *ngIf="meeting.type">

    <ion-label>Tipo de Reunião</ion-label>

    <ion-select [(ngModel)]="meeting.type" [compareWith]="compareFn" okText="OK" cancelText="Cancelar">
      <ion-option *ngFor="let meetingType of meetingTypes" [value]="meetingType">{{meetingType.name}}</ion-option>
    </ion-select>

  </ion-item>

  <ion-item *ngIf="meeting.type" text-center>

    <p>{{ getMeetingTypeSummary() }}</p>

  </ion-item>

  <ion-item>

    <ion-label>Regional de Referência</ion-label>

    <ion-select [(ngModel)]="meeting.regional" [compareWith]="compareFn" okText="OK" cancelText="Cancelar">
      <ion-option *ngFor="let regional of regionals" [value]="regional">{{regional.name}}</ion-option>
    </ion-select>

  </ion-item>

  <ion-item>

    <ion-label>Local da Reunião</ion-label>

    <ion-select [(ngModel)]="meeting.place" [compareWith]="compareFn" okText="OK" cancelText="Cancelar">
      <ion-option *ngFor="let sectorial of sectorials" [value]="sectorial">{{sectorial.name}}</ion-option>
    </ion-select>

  </ion-item>

  <ion-item>

    <ion-label>Data</ion-label>

    <ion-datetime
      displayFormat="DD/MM/YYYY (DDDD)"
      pickerFormat="DD MMMM YYYY"
      [(ngModel)]="meeting.date"
      [min]="minDate"
      [max]="maxDate"
      doneText="OK"
      cancelText="Cancelar"
    ></ion-datetime>

  </ion-item>

  <ion-item>

    <ion-label>Horário</ion-label>

    <ion-datetime
      displayFormat="HH:mm"
      pickerFormat="HH mm"
      minuteValues="0,10,20,30,40,50"
      [(ngModel)]="meeting.time"
      doneText="OK"
      cancelText="Cancelar"
    ></ion-datetime>

  </ion-item>

  <ion-item>

    <ion-label>Atendimento</ion-label>

    <ion-select [(ngModel)]="meeting.responsible" [compareWith]="compareFn" okText="OK" cancelText="Cancelar">
      <ion-option *ngFor="let filteredContact of filteredContacts" [value]="filteredContact">{{filteredContact.name}} ({{filteredContact.city}})</ion-option>
    </ion-select>

  </ion-item>

  <ion-item>

    <ion-label>Observação</ion-label>

    <ion-input type="text" [(ngModel)]="meeting.observation"></ion-input>

  </ion-item>

</ion-content>

<ion-footer>

  <ion-toolbar>

    <ion-buttons text-center>
      <button ion-button color="dark" (click)="openMeetingTypes()">
        Ver tipos de reunião
      </button>
    </ion-buttons>

  </ion-toolbar>

</ion-footer>